"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/listing/[id]/page",{

/***/ "(app-pages-browser)/./src/components/ChatWidget.tsx":
/*!***************************************!*\
  !*** ./src/components/ChatWidget.tsx ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ChatWidget)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/../../node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/../../node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-redux */ \"(app-pages-browser)/../../node_modules/react-redux/dist/react-redux.mjs\");\n/* harmony import */ var _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/ChatContext */ \"(app-pages-browser)/./src/contexts/ChatContext.tsx\");\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/ui/button */ \"(app-pages-browser)/./src/components/ui/button.tsx\");\n/* harmony import */ var _components_ui_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/ui/input */ \"(app-pages-browser)/./src/components/ui/input.tsx\");\n/* harmony import */ var _components_ui_card__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/ui/card */ \"(app-pages-browser)/./src/components/ui/card.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\nfunction ChatWidget(param) {\n    let { listingId, sellerId, sellerName = \"Seller\", listingTitle = \"Item\", isOpen, onClose } = param;\n    _s();\n    const [localMessages, setLocalMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const user = (0,react_redux__WEBPACK_IMPORTED_MODULE_6__.useSelector)({\n        \"ChatWidget.useSelector[user]\": (state)=>state.auth.user\n    }[\"ChatWidget.useSelector[user]\"]);\n    const userId = (user === null || user === void 0 ? void 0 : user.id) || \"anonymous\";\n    const { sendMessage, isConnected, isConnecting, connectionStatus, addMessageListener } = (0,_contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat)();\n    // Listen for messages related to this conversation\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"ChatWidget.useEffect\": ()=>{\n            const unsubscribe = addMessageListener({\n                \"ChatWidget.useEffect.unsubscribe\": (msg)=>{\n                    // Only add messages that are part of this conversation\n                    if (msg.listingId === listingId && (msg.senderId === userId || msg.receiverId === userId) && (msg.senderId === sellerId || msg.receiverId === sellerId)) {\n                        setLocalMessages({\n                            \"ChatWidget.useEffect.unsubscribe\": (prev)=>[\n                                    ...prev,\n                                    msg\n                                ]\n                        }[\"ChatWidget.useEffect.unsubscribe\"]);\n                    }\n                }\n            }[\"ChatWidget.useEffect.unsubscribe\"]);\n            return unsubscribe;\n        }\n    }[\"ChatWidget.useEffect\"], [\n        addMessageListener,\n        listingId,\n        userId,\n        sellerId\n    ]);\n    const scrollToBottom = ()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"ChatWidget.useEffect\": ()=>{\n            scrollToBottom();\n        }\n    }[\"ChatWidget.useEffect\"], [\n        localMessages\n    ]);\n    const handleSend = ()=>{\n        if (input.trim() && isConnected) {\n            const message = {\n                senderId: userId,\n                senderName: (user === null || user === void 0 ? void 0 : user.name) || \"Buyer\",\n                receiverId: sellerId,\n                content: input.trim(),\n                listingId\n            };\n            // Add message to local state immediately for better UX\n            setLocalMessages((prev)=>[\n                    ...prev,\n                    message\n                ]);\n            const success = sendMessage(message);\n            if (success) {\n                setInput(\"\");\n            } else {\n                // Remove the message from local state if sending failed\n                setLocalMessages((prev)=>prev.filter((m)=>m !== message));\n            }\n        }\n    };\n    const handleKeyPress = (e)=>{\n        if (e.key === \"Enter\" && !e.shiftKey) {\n            e.preventDefault();\n            handleSend();\n        }\n    };\n    if (!isOpen) return null;\n    const getConnectionStatusText = ()=>{\n        switch(connectionStatus){\n            case \"connecting\":\n                return \"Connecting to chat...\";\n            case \"connected\":\n                return \"Connected\";\n            case \"disconnected\":\n                return \"Disconnected - trying to reconnect...\";\n            default:\n                return \"Unknown status\";\n        }\n    };\n    const getConnectionStatusColor = ()=>{\n        switch(connectionStatus){\n            case \"connecting\":\n                return \"text-yellow-500\";\n            case \"connected\":\n                return \"text-green-500\";\n            case \"disconnected\":\n                return \"text-red-500\";\n            default:\n                return \"text-gray-500\";\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed bottom-4 right-4 w-80 h-96 z-50\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_5__.Card, {\n            className: \"h-full flex flex-col bg-white shadow-lg\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center justify-between p-4 border-b bg-gray-50 rounded-t-lg\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-1\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                    className: \"font-semibold text-sm\",\n                                    children: [\n                                        \"Chat with \",\n                                        sellerName\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                                    lineNumber: 123,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-xs text-gray-500 truncate\",\n                                    children: listingTitle\n                                }, void 0, false, {\n                                    fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                                    lineNumber: 124,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center space-x-2 mt-1\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"w-2 h-2 rounded-full \".concat(connectionStatus === \"connected\" ? \"bg-green-500\" : connectionStatus === \"connecting\" ? \"bg-yellow-500\" : \"bg-red-500\")\n                                        }, void 0, false, {\n                                            fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                                            lineNumber: 126,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-xs \".concat(getConnectionStatusColor()),\n                                            children: getConnectionStatusText()\n                                        }, void 0, false, {\n                                            fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                                            lineNumber: 130,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                                    lineNumber: 125,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                            lineNumber: 122,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                            variant: \"ghost\",\n                            size: \"sm\",\n                            onClick: onClose,\n                            className: \"h-6 w-6 p-0 ml-2\",\n                            children: \"\\xd7\"\n                        }, void 0, false, {\n                            fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                            lineNumber: 135,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                    lineNumber: 121,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex-1 overflow-y-auto p-4 space-y-2\",\n                    children: [\n                        localMessages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-center text-gray-500 text-sm py-8\",\n                            children: connectionStatus === \"connected\" ? \"Start a conversation about this item\" : \"Connecting to chat service...\"\n                        }, void 0, false, {\n                            fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                            lineNumber: 148,\n                            columnNumber: 13\n                        }, this) : localMessages.map((msg, idx)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex \".concat(msg.senderId === userId ? \"justify-end\" : \"justify-start\"),\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"max-w-xs px-3 py-2 rounded-lg text-sm \".concat(msg.senderId === userId ? \"bg-blue-500 text-white\" : \"bg-gray-200 text-gray-800\"),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"font-medium text-xs mb-1\",\n                                            children: msg.senderName\n                                        }, void 0, false, {\n                                            fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                                            lineNumber: 169,\n                                            columnNumber: 19\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: msg.content\n                                        }, void 0, false, {\n                                            fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                                            lineNumber: 172,\n                                            columnNumber: 19\n                                        }, this),\n                                        msg.timestamp && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-xs opacity-70 mt-1\",\n                                            children: new Date(msg.timestamp).toLocaleTimeString()\n                                        }, void 0, false, {\n                                            fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                                            lineNumber: 174,\n                                            columnNumber: 21\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                                    lineNumber: 162,\n                                    columnNumber: 17\n                                }, this)\n                            }, msg.id || idx, false, {\n                                fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                                lineNumber: 156,\n                                columnNumber: 15\n                            }, this)),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            ref: messagesEndRef\n                        }, void 0, false, {\n                            fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                            lineNumber: 182,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                    lineNumber: 146,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-4 border-t\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex space-x-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_input__WEBPACK_IMPORTED_MODULE_4__.Input, {\n                                    value: input,\n                                    onChange: (e)=>setInput(e.target.value),\n                                    onKeyPress: handleKeyPress,\n                                    placeholder: connectionStatus === \"connected\" ? \"Type your message...\" : \"Connecting...\",\n                                    disabled: !isConnected || isConnecting,\n                                    className: \"flex-1\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                                    lineNumber: 188,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.Button, {\n                                    onClick: handleSend,\n                                    disabled: !input.trim() || !isConnected || isConnecting,\n                                    size: \"sm\",\n                                    children: \"Send\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                                    lineNumber: 200,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                            lineNumber: 187,\n                            columnNumber: 11\n                        }, this),\n                        connectionStatus !== \"connected\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-xs mt-1 \".concat(getConnectionStatusColor()),\n                            children: getConnectionStatusText()\n                        }, void 0, false, {\n                            fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                            lineNumber: 209,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n                    lineNumber: 186,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n            lineNumber: 119,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/components/ChatWidget.tsx\",\n        lineNumber: 118,\n        columnNumber: 5\n    }, this);\n}\n_s(ChatWidget, \"B6txqlSwa89LA5618r5M/uXGaw4=\", false, function() {\n    return [\n        react_redux__WEBPACK_IMPORTED_MODULE_6__.useSelector,\n        _contexts_ChatContext__WEBPACK_IMPORTED_MODULE_2__.useChat\n    ];\n});\n_c = ChatWidget;\nvar _c;\n$RefreshReg$(_c, \"ChatWidget\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL0NoYXRXaWRnZXQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBRW9EO0FBQ1Y7QUFFb0I7QUFDZDtBQUNGO0FBQ0Y7QUFXN0IsU0FBU1EsV0FBVyxLQU9qQjtRQVBpQixFQUNqQ0MsU0FBUyxFQUNUQyxRQUFRLEVBQ1JDLGFBQWEsUUFBUSxFQUNyQkMsZUFBZSxNQUFNLEVBQ3JCQyxNQUFNLEVBQ05DLE9BQU8sRUFDUyxHQVBpQjs7SUFRakMsTUFBTSxDQUFDQyxlQUFlQyxpQkFBaUIsR0FBR2hCLCtDQUFRQSxDQUFnQixFQUFFO0lBQ3BFLE1BQU0sQ0FBQ2lCLE9BQU9DLFNBQVMsR0FBR2xCLCtDQUFRQSxDQUFDO0lBQ25DLE1BQU1tQixpQkFBaUJqQiw2Q0FBTUEsQ0FBaUI7SUFFOUMsTUFBTWtCLE9BQU9qQix3REFBV0E7d0NBQUMsQ0FBQ2tCLFFBQXFCQSxNQUFNQyxJQUFJLENBQUNGLElBQUk7O0lBQzlELE1BQU1HLFNBQVNILENBQUFBLGlCQUFBQSwyQkFBQUEsS0FBTUksRUFBRSxLQUFJO0lBRTNCLE1BQU0sRUFBRUMsV0FBVyxFQUFFQyxXQUFXLEVBQUVDLFlBQVksRUFBRUMsZ0JBQWdCLEVBQUVDLGtCQUFrQixFQUFFLEdBQUd6Qiw4REFBT0E7SUFFaEcsbURBQW1EO0lBQ25ESCxnREFBU0E7Z0NBQUM7WUFDUixNQUFNNkIsY0FBY0Q7b0RBQW1CLENBQUNFO29CQUN0Qyx1REFBdUQ7b0JBQ3ZELElBQUlBLElBQUl0QixTQUFTLEtBQUtBLGFBQ2pCc0IsQ0FBQUEsSUFBSUMsUUFBUSxLQUFLVCxVQUFVUSxJQUFJRSxVQUFVLEtBQUtWLE1BQUssS0FDbkRRLENBQUFBLElBQUlDLFFBQVEsS0FBS3RCLFlBQVlxQixJQUFJRSxVQUFVLEtBQUt2QixRQUFPLEdBQUk7d0JBQzlETTtnRUFBaUJrQixDQUFBQSxPQUFRO3VDQUFJQTtvQ0FBTUg7aUNBQUk7O29CQUN6QztnQkFDRjs7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QUFVOzs7Ozs7c0RBRWpCLDhEQUFDYTtzREFBS3hCLElBQUlhLE9BQU87Ozs7Ozt3Q0FDaEJiLElBQUltQyxTQUFTLGtCQUNaLDhEQUFDWDs0Q0FBSUMsV0FBVTtzREFDWixJQUFJVyxLQUFLcEMsSUFBSW1DLFNBQVMsRUFBRUUsa0JBQWtCOzs7Ozs7Ozs7Ozs7K0JBbEI1Q3JDLElBQUlQLEVBQUUsSUFBSXlDOzs7OztzQ0F5QnJCLDhEQUFDVjs0QkFBSWMsS0FBS2xEOzs7Ozs7Ozs7Ozs7OEJBSVosOERBQUNvQztvQkFBSUMsV0FBVTs7c0NBQ2IsOERBQUNEOzRCQUFJQyxXQUFVOzs4Q0FDYiw4REFBQ2xELHVEQUFLQTtvQ0FDSmdFLE9BQU9yRDtvQ0FDUHNELFVBQVUsQ0FBQ3RCLElBQU0vQixTQUFTK0IsRUFBRXVCLE1BQU0sQ0FBQ0YsS0FBSztvQ0FDeENHLFlBQVl6QjtvQ0FDWjBCLGFBQ0U5QyxxQkFBcUIsY0FDakIseUJBQ0E7b0NBRU4rQyxVQUFVLENBQUNqRCxlQUFlQztvQ0FDMUI2QixXQUFVOzs7Ozs7OENBRVosOERBQUNuRCx5REFBTUE7b0NBQ0x5RCxTQUFTdkI7b0NBQ1RvQyxVQUFVLENBQUMxRCxNQUFNdUIsSUFBSSxNQUFNLENBQUNkLGVBQWVDO29DQUMzQ2tDLE1BQUs7OENBQ047Ozs7Ozs7Ozs7Ozt3QkFJRmpDLHFCQUFxQiw2QkFDcEIsOERBQUM4Qjs0QkFBRUYsV0FBVyxnQkFBMkMsT0FBM0JGO3NDQUMzQkQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT2Y7R0FyTXdCN0M7O1FBWVRMLG9EQUFXQTtRQUdpRUMsMERBQU9BOzs7S0FmMUVJIiwic291cmNlcyI6WyIvVXNlcnMvbmloYWwvRGVza3RvcC9OaWhhbC9Qcm9qZWN0cy9saXN0cmkvYXBwcy9mcm9udGVuZC9zcmMvY29tcG9uZW50cy9DaGF0V2lkZ2V0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VTZWxlY3RvciB9IGZyb20gXCJyZWFjdC1yZWR1eFwiO1xuaW1wb3J0IHsgUm9vdFN0YXRlIH0gZnJvbSBcIkAvc3RvcmVcIjtcbmltcG9ydCB7IHVzZUNoYXQsIENoYXRNZXNzYWdlIH0gZnJvbSBcIkAvY29udGV4dHMvQ2hhdENvbnRleHRcIjtcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvYnV0dG9uXCI7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvaW5wdXRcIjtcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2NhcmRcIjtcblxuaW50ZXJmYWNlIENoYXRXaWRnZXRQcm9wcyB7XG4gIGxpc3RpbmdJZDogc3RyaW5nO1xuICBzZWxsZXJJZDogc3RyaW5nO1xuICBzZWxsZXJOYW1lPzogc3RyaW5nO1xuICBsaXN0aW5nVGl0bGU/OiBzdHJpbmc7XG4gIGlzT3BlbjogYm9vbGVhbjtcbiAgb25DbG9zZTogKCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ2hhdFdpZGdldCh7XG4gIGxpc3RpbmdJZCxcbiAgc2VsbGVySWQsXG4gIHNlbGxlck5hbWUgPSBcIlNlbGxlclwiLFxuICBsaXN0aW5nVGl0bGUgPSBcIkl0ZW1cIixcbiAgaXNPcGVuLFxuICBvbkNsb3NlLFxufTogQ2hhdFdpZGdldFByb3BzKSB7XG4gIGNvbnN0IFtsb2NhbE1lc3NhZ2VzLCBzZXRMb2NhbE1lc3NhZ2VzXSA9IHVzZVN0YXRlPENoYXRNZXNzYWdlW10+KFtdKTtcbiAgY29uc3QgW2lucHV0LCBzZXRJbnB1dF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgbWVzc2FnZXNFbmRSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICBcbiAgY29uc3QgdXNlciA9IHVzZVNlbGVjdG9yKChzdGF0ZTogUm9vdFN0YXRlKSA9PiBzdGF0ZS5hdXRoLnVzZXIpO1xuICBjb25zdCB1c2VySWQgPSB1c2VyPy5pZCB8fCBcImFub255bW91c1wiO1xuXG4gIGNvbnN0IHsgc2VuZE1lc3NhZ2UsIGlzQ29ubmVjdGVkLCBpc0Nvbm5lY3RpbmcsIGNvbm5lY3Rpb25TdGF0dXMsIGFkZE1lc3NhZ2VMaXN0ZW5lciB9ID0gdXNlQ2hhdCgpO1xuXG4gIC8vIExpc3RlbiBmb3IgbWVzc2FnZXMgcmVsYXRlZCB0byB0aGlzIGNvbnZlcnNhdGlvblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gYWRkTWVzc2FnZUxpc3RlbmVyKChtc2c6IENoYXRNZXNzYWdlKSA9PiB7XG4gICAgICAvLyBPbmx5IGFkZCBtZXNzYWdlcyB0aGF0IGFyZSBwYXJ0IG9mIHRoaXMgY29udmVyc2F0aW9uXG4gICAgICBpZiAobXNnLmxpc3RpbmdJZCA9PT0gbGlzdGluZ0lkICYmIFxuICAgICAgICAgIChtc2cuc2VuZGVySWQgPT09IHVzZXJJZCB8fCBtc2cucmVjZWl2ZXJJZCA9PT0gdXNlcklkKSAmJlxuICAgICAgICAgIChtc2cuc2VuZGVySWQgPT09IHNlbGxlcklkIHx8IG1zZy5yZWNlaXZlcklkID09PSBzZWxsZXJJZCkpIHtcbiAgICAgICAgc2V0TG9jYWxNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCBtc2ddKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiB1bnN1YnNjcmliZTtcbiAgfSwgW2FkZE1lc3NhZ2VMaXN0ZW5lciwgbGlzdGluZ0lkLCB1c2VySWQsIHNlbGxlcklkXSk7XG5cbiAgY29uc3Qgc2Nyb2xsVG9Cb3R0b20gPSAoKSA9PiB7XG4gICAgbWVzc2FnZXNFbmRSZWYuY3VycmVudD8uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogXCJzbW9vdGhcIiB9KTtcbiAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNjcm9sbFRvQm90dG9tKCk7XG4gIH0sIFtsb2NhbE1lc3NhZ2VzXSk7XG5cbiAgY29uc3QgaGFuZGxlU2VuZCA9ICgpID0+IHtcbiAgICBpZiAoaW5wdXQudHJpbSgpICYmIGlzQ29ubmVjdGVkKSB7XG4gICAgICBjb25zdCBtZXNzYWdlOiBDaGF0TWVzc2FnZSA9IHtcbiAgICAgICAgc2VuZGVySWQ6IHVzZXJJZCxcbiAgICAgICAgc2VuZGVyTmFtZTogdXNlcj8ubmFtZSB8fCBcIkJ1eWVyXCIsXG4gICAgICAgIHJlY2VpdmVySWQ6IHNlbGxlcklkLFxuICAgICAgICBjb250ZW50OiBpbnB1dC50cmltKCksXG4gICAgICAgIGxpc3RpbmdJZCxcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIEFkZCBtZXNzYWdlIHRvIGxvY2FsIHN0YXRlIGltbWVkaWF0ZWx5IGZvciBiZXR0ZXIgVVhcbiAgICAgIHNldExvY2FsTWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgbWVzc2FnZV0pO1xuICAgICAgXG4gICAgICBjb25zdCBzdWNjZXNzID0gc2VuZE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICBzZXRJbnB1dChcIlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgbWVzc2FnZSBmcm9tIGxvY2FsIHN0YXRlIGlmIHNlbmRpbmcgZmFpbGVkXG4gICAgICAgIHNldExvY2FsTWVzc2FnZXMocHJldiA9PiBwcmV2LmZpbHRlcihtID0+IG0gIT09IG1lc3NhZ2UpKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlS2V5UHJlc3MgPSAoZTogUmVhY3QuS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gXCJFbnRlclwiICYmICFlLnNoaWZ0S2V5KSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBoYW5kbGVTZW5kKCk7XG4gICAgfVxuICB9O1xuXG4gIGlmICghaXNPcGVuKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBnZXRDb25uZWN0aW9uU3RhdHVzVGV4dCA9ICgpID0+IHtcbiAgICBzd2l0Y2ggKGNvbm5lY3Rpb25TdGF0dXMpIHtcbiAgICAgIGNhc2UgXCJjb25uZWN0aW5nXCI6XG4gICAgICAgIHJldHVybiBcIkNvbm5lY3RpbmcgdG8gY2hhdC4uLlwiO1xuICAgICAgY2FzZSBcImNvbm5lY3RlZFwiOlxuICAgICAgICByZXR1cm4gXCJDb25uZWN0ZWRcIjtcbiAgICAgIGNhc2UgXCJkaXNjb25uZWN0ZWRcIjpcbiAgICAgICAgcmV0dXJuIFwiRGlzY29ubmVjdGVkIC0gdHJ5aW5nIHRvIHJlY29ubmVjdC4uLlwiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFwiVW5rbm93biBzdGF0dXNcIjtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZ2V0Q29ubmVjdGlvblN0YXR1c0NvbG9yID0gKCkgPT4ge1xuICAgIHN3aXRjaCAoY29ubmVjdGlvblN0YXR1cykge1xuICAgICAgY2FzZSBcImNvbm5lY3RpbmdcIjpcbiAgICAgICAgcmV0dXJuIFwidGV4dC15ZWxsb3ctNTAwXCI7XG4gICAgICBjYXNlIFwiY29ubmVjdGVkXCI6XG4gICAgICAgIHJldHVybiBcInRleHQtZ3JlZW4tNTAwXCI7XG4gICAgICBjYXNlIFwiZGlzY29ubmVjdGVkXCI6XG4gICAgICAgIHJldHVybiBcInRleHQtcmVkLTUwMFwiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFwidGV4dC1ncmF5LTUwMFwiO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgYm90dG9tLTQgcmlnaHQtNCB3LTgwIGgtOTYgei01MFwiPlxuICAgICAgPENhcmQgY2xhc3NOYW1lPVwiaC1mdWxsIGZsZXggZmxleC1jb2wgYmctd2hpdGUgc2hhZG93LWxnXCI+XG4gICAgICAgIHsvKiBIZWFkZXIgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtNCBib3JkZXItYiBiZy1ncmF5LTUwIHJvdW5kZWQtdC1sZ1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xXCI+XG4gICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZCB0ZXh0LXNtXCI+Q2hhdCB3aXRoIHtzZWxsZXJOYW1lfTwvaDM+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgdHJ1bmNhdGVcIj57bGlzdGluZ1RpdGxlfTwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yIG10LTFcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2B3LTIgaC0yIHJvdW5kZWQtZnVsbCAke1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25TdGF0dXMgPT09IFwiY29ubmVjdGVkXCIgPyBcImJnLWdyZWVuLTUwMFwiIDogXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvblN0YXR1cyA9PT0gXCJjb25uZWN0aW5nXCIgPyBcImJnLXllbGxvdy01MDBcIiA6IFwiYmctcmVkLTUwMFwiXG4gICAgICAgICAgICAgIH1gfT48L2Rpdj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtgdGV4dC14cyAke2dldENvbm5lY3Rpb25TdGF0dXNDb2xvcigpfWB9PlxuICAgICAgICAgICAgICAgIHtnZXRDb25uZWN0aW9uU3RhdHVzVGV4dCgpfVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICB2YXJpYW50PVwiZ2hvc3RcIlxuICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xvc2V9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJoLTYgdy02IHAtMCBtbC0yXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICDDl1xuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogTWVzc2FnZXMgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG92ZXJmbG93LXktYXV0byBwLTQgc3BhY2UteS0yXCI+XG4gICAgICAgICAge2xvY2FsTWVzc2FnZXMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNTAwIHRleHQtc20gcHktOFwiPlxuICAgICAgICAgICAgICB7Y29ubmVjdGlvblN0YXR1cyA9PT0gXCJjb25uZWN0ZWRcIiBcbiAgICAgICAgICAgICAgICA/IFwiU3RhcnQgYSBjb252ZXJzYXRpb24gYWJvdXQgdGhpcyBpdGVtXCJcbiAgICAgICAgICAgICAgICA6IFwiQ29ubmVjdGluZyB0byBjaGF0IHNlcnZpY2UuLi5cIlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgbG9jYWxNZXNzYWdlcy5tYXAoKG1zZywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBrZXk9e21zZy5pZCB8fCBpZHh9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCAke1xuICAgICAgICAgICAgICAgICAgbXNnLnNlbmRlcklkID09PSB1c2VySWQgPyBcImp1c3RpZnktZW5kXCIgOiBcImp1c3RpZnktc3RhcnRcIlxuICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgbWF4LXcteHMgcHgtMyBweS0yIHJvdW5kZWQtbGcgdGV4dC1zbSAke1xuICAgICAgICAgICAgICAgICAgICBtc2cuc2VuZGVySWQgPT09IHVzZXJJZFxuICAgICAgICAgICAgICAgICAgICAgID8gXCJiZy1ibHVlLTUwMCB0ZXh0LXdoaXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICA6IFwiYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMFwiXG4gICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIHRleHQteHMgbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICB7bXNnLnNlbmRlck5hbWV9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXY+e21zZy5jb250ZW50fTwvZGl2PlxuICAgICAgICAgICAgICAgICAge21zZy50aW1lc3RhbXAgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgb3BhY2l0eS03MCBtdC0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAge25ldyBEYXRlKG1zZy50aW1lc3RhbXApLnRvTG9jYWxlVGltZVN0cmluZygpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSlcbiAgICAgICAgICApfVxuICAgICAgICAgIDxkaXYgcmVmPXttZXNzYWdlc0VuZFJlZn0gLz5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIElucHV0ICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNCBib3JkZXItdFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICB2YWx1ZT17aW5wdXR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0SW5wdXQoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICBvbktleVByZXNzPXtoYW5kbGVLZXlQcmVzc31cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25TdGF0dXMgPT09IFwiY29ubmVjdGVkXCIgXG4gICAgICAgICAgICAgICAgICA/IFwiVHlwZSB5b3VyIG1lc3NhZ2UuLi5cIiBcbiAgICAgICAgICAgICAgICAgIDogXCJDb25uZWN0aW5nLi4uXCJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17IWlzQ29ubmVjdGVkIHx8IGlzQ29ubmVjdGluZ31cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC0xXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNlbmR9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXshaW5wdXQudHJpbSgpIHx8ICFpc0Nvbm5lY3RlZCB8fCBpc0Nvbm5lY3Rpbmd9XG4gICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIFNlbmRcbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtjb25uZWN0aW9uU3RhdHVzICE9PSBcImNvbm5lY3RlZFwiICYmIChcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT17YHRleHQteHMgbXQtMSAke2dldENvbm5lY3Rpb25TdGF0dXNDb2xvcigpfWB9PlxuICAgICAgICAgICAgICB7Z2V0Q29ubmVjdGlvblN0YXR1c1RleHQoKX1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvQ2FyZD5cbiAgICA8L2Rpdj5cbiAgKTtcbn0gIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU2VsZWN0b3IiLCJ1c2VDaGF0IiwiQnV0dG9uIiwiSW5wdXQiLCJDYXJkIiwiQ2hhdFdpZGdldCIsImxpc3RpbmdJZCIsInNlbGxlcklkIiwic2VsbGVyTmFtZSIsImxpc3RpbmdUaXRsZSIsImlzT3BlbiIsIm9uQ2xvc2UiLCJsb2NhbE1lc3NhZ2VzIiwic2V0TG9jYWxNZXNzYWdlcyIsImlucHV0Iiwic2V0SW5wdXQiLCJtZXNzYWdlc0VuZFJlZiIsInVzZXIiLCJzdGF0ZSIsImF1dGgiLCJ1c2VySWQiLCJpZCIsInNlbmRNZXNzYWdlIiwiaXNDb25uZWN0ZWQiLCJpc0Nvbm5lY3RpbmciLCJjb25uZWN0aW9uU3RhdHVzIiwiYWRkTWVzc2FnZUxpc3RlbmVyIiwidW5zdWJzY3JpYmUiLCJtc2ciLCJzZW5kZXJJZCIsInJlY2VpdmVySWQiLCJwcmV2Iiwic2Nyb2xsVG9Cb3R0b20iLCJjdXJyZW50Iiwic2Nyb2xsSW50b1ZpZXciLCJiZWhhdmlvciIsImhhbmRsZVNlbmQiLCJ0cmltIiwibWVzc2FnZSIsInNlbmRlck5hbWUiLCJuYW1lIiwiY29udGVudCIsInN1Y2Nlc3MiLCJmaWx0ZXIiLCJtIiwiaGFuZGxlS2V5UHJlc3MiLCJlIiwia2V5Iiwic2hpZnRLZXkiLCJwcmV2ZW50RGVmYXVsdCIsImdldENvbm5lY3Rpb25TdGF0dXNUZXh0IiwiZ2V0Q29ubmVjdGlvblN0YXR1c0NvbG9yIiwiZGl2IiwiY2xhc3NOYW1lIiwiaDMiLCJwIiwic3BhbiIsInZhcmlhbnQiLCJzaXplIiwib25DbGljayIsImxlbmd0aCIsIm1hcCIsImlkeCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJyZWYiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwidGFyZ2V0Iiwib25LZXlQcmVzcyIsInBsYWNlaG9sZGVyIiwiZGlzYWJsZWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/ChatWidget.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/contexts/ChatContext.tsx":
/*!**************************************!*\
  !*** ./src/contexts/ChatContext.tsx ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatProvider: () => (/* binding */ ChatProvider),\n/* harmony export */   useChat: () => (/* binding */ useChat)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/../../node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/../../node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var sockjs_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! sockjs-client */ \"(app-pages-browser)/../../node_modules/sockjs-client/lib/entry.js\");\n/* harmony import */ var sockjs_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(sockjs_client__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _stomp_stompjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @stomp/stompjs */ \"(app-pages-browser)/../../node_modules/@stomp/stompjs/esm6/client.js\");\n/* __next_internal_client_entry_do_not_use__ ChatProvider,useChat auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\nconst ChatContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\n// Global connection manager\nlet globalClient = null;\nlet globalConnectionState = \"disconnected\";\nlet messageListeners = new Set();\nlet processedMessages = new Set();\nfunction ChatProvider(param) {\n    let { children, userId } = param;\n    _s();\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [connectionState, setConnectionState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"disconnected\");\n    const reconnectTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const connectionAttemptsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const maxReconnectAttempts = 3;\n    const reconnectDelay = 3000;\n    const isConnectingRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const updateConnectionState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChatProvider.useCallback[updateConnectionState]\": (newState)=>{\n            globalConnectionState = newState;\n            setConnectionState(newState);\n        }\n    }[\"ChatProvider.useCallback[updateConnectionState]\"], []);\n    const addMessageListener = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChatProvider.useCallback[addMessageListener]\": (listener)=>{\n            messageListeners.add(listener);\n            return ({\n                \"ChatProvider.useCallback[addMessageListener]\": ()=>{\n                    messageListeners.delete(listener);\n                }\n            })[\"ChatProvider.useCallback[addMessageListener]\"];\n        }\n    }[\"ChatProvider.useCallback[addMessageListener]\"], []);\n    const notifyMessageListeners = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChatProvider.useCallback[notifyMessageListeners]\": (msg)=>{\n            messageListeners.forEach({\n                \"ChatProvider.useCallback[notifyMessageListeners]\": (listener)=>{\n                    try {\n                        listener(msg);\n                    } catch (error) {\n                        console.error(\"Error in message listener:\", error);\n                    }\n                }\n            }[\"ChatProvider.useCallback[notifyMessageListeners]\"]);\n        }\n    }[\"ChatProvider.useCallback[notifyMessageListeners]\"], []);\n    const connect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChatProvider.useCallback[connect]\": ()=>{\n            if (!userId || isConnectingRef.current) return;\n            // Check if there's already a global connection\n            if (globalClient && globalClient.connected) {\n                console.log(\"ðŸ”Œ Using existing global WebSocket connection for user:\", userId);\n                updateConnectionState(\"connected\");\n                return;\n            }\n            // Clean up any existing connection\n            if (globalClient) {\n                try {\n                    globalClient.deactivate();\n                } catch (error) {\n                    console.warn(\"Error deactivating existing global client:\", error);\n                }\n                globalClient = null;\n            }\n            if (reconnectTimeoutRef.current) {\n                clearTimeout(reconnectTimeoutRef.current);\n                reconnectTimeoutRef.current = null;\n            }\n            connectionAttemptsRef.current = 0;\n            isConnectingRef.current = true;\n            console.log(\"ðŸ”Œ Initializing global WebSocket connection for user:\", userId);\n            updateConnectionState(\"connecting\");\n            try {\n                const socket = new (sockjs_client__WEBPACK_IMPORTED_MODULE_2___default())(\"http://localhost:8081/ws\");\n                const client = new _stomp_stompjs__WEBPACK_IMPORTED_MODULE_3__.Client({\n                    webSocketFactory: {\n                        \"ChatProvider.useCallback[connect]\": ()=>socket\n                    }[\"ChatProvider.useCallback[connect]\"],\n                    reconnectDelay: 0,\n                    heartbeatIncoming: 4000,\n                    heartbeatOutgoing: 4000,\n                    onConnect: {\n                        \"ChatProvider.useCallback[connect]\": ()=>{\n                            console.log(\"âœ… Global WebSocket connected successfully for user:\", userId);\n                            connectionAttemptsRef.current = 0;\n                            isConnectingRef.current = false;\n                            updateConnectionState(\"connected\");\n                            globalClient = client;\n                            // Subscribe to user-specific private messages\n                            client.subscribe(\"/user/\".concat(userId, \"/queue/messages\"), {\n                                \"ChatProvider.useCallback[connect]\": (message)=>{\n                                    try {\n                                        console.log(\"ðŸ“¨ Received private message for user\", userId, \":\", message.body);\n                                        const body = JSON.parse(message.body);\n                                        console.log(\"ðŸ“¨ Parsed private message:\", body);\n                                        // Only process if it's a chat message (not join message)\n                                        if (body.content && body.content !== \"joined\") {\n                                            // Create a unique key for message deduplication\n                                            const messageKey = \"\".concat(body.id || body.timestamp || Date.now(), \"_\").concat(body.senderId, \"_\").concat(body.content);\n                                            if (processedMessages.has(messageKey)) {\n                                                console.log(\"ðŸ“¨ Skipping duplicate message:\", messageKey);\n                                                return;\n                                            }\n                                            processedMessages.add(messageKey);\n                                            // Clean up old messages from the set (keep only last 100)\n                                            if (processedMessages.size > 100) {\n                                                const messagesArray = Array.from(processedMessages);\n                                                processedMessages.clear();\n                                                messagesArray.slice(-50).forEach({\n                                                    \"ChatProvider.useCallback[connect]\": (msg)=>processedMessages.add(msg)\n                                                }[\"ChatProvider.useCallback[connect]\"]);\n                                            }\n                                            console.log(\"ðŸ“¨ Processing private message\");\n                                            setMessages({\n                                                \"ChatProvider.useCallback[connect]\": (prev)=>[\n                                                        ...prev,\n                                                        body\n                                                    ]\n                                            }[\"ChatProvider.useCallback[connect]\"]);\n                                            notifyMessageListeners(body);\n                                        } else {\n                                            console.log(\"ðŸ“¨ Ignoring join message\");\n                                        }\n                                    } catch (error) {\n                                        console.error(\"âŒ Error parsing private message:\", error);\n                                    }\n                                }\n                            }[\"ChatProvider.useCallback[connect]\"]);\n                            // Send join message only once per connection\n                            const joinMessage = {\n                                senderId: userId,\n                                senderName: userId,\n                                content: \"joined\",\n                                receiverId: \"\",\n                                listingId: \"\"\n                            };\n                            console.log(\"ðŸ‘‹ Sending join message:\", joinMessage);\n                            client.publish({\n                                destination: \"/app/chat.join\",\n                                body: JSON.stringify(joinMessage)\n                            });\n                        }\n                    }[\"ChatProvider.useCallback[connect]\"],\n                    onDisconnect: {\n                        \"ChatProvider.useCallback[connect]\": ()=>{\n                            console.log(\"âŒ Global WebSocket disconnected for user:\", userId);\n                            isConnectingRef.current = false;\n                            updateConnectionState(\"disconnected\");\n                            globalClient = null;\n                            // Attempt to reconnect if we haven't exceeded max attempts\n                            if (connectionAttemptsRef.current < maxReconnectAttempts) {\n                                connectionAttemptsRef.current++;\n                                console.log(\"\\uD83D\\uDD04 Reconnection attempt \".concat(connectionAttemptsRef.current, \"/\").concat(maxReconnectAttempts, \" for user:\"), userId);\n                                reconnectTimeoutRef.current = setTimeout({\n                                    \"ChatProvider.useCallback[connect]\": ()=>{\n                                        connect();\n                                    }\n                                }[\"ChatProvider.useCallback[connect]\"], reconnectDelay);\n                            } else {\n                                console.error(\"âŒ Max reconnection attempts reached for user:\", userId);\n                                updateConnectionState(\"error\");\n                            }\n                        }\n                    }[\"ChatProvider.useCallback[connect]\"],\n                    onStompError: {\n                        \"ChatProvider.useCallback[connect]\": (error)=>{\n                            console.error(\"âŒ STOMP error for user\", userId, \":\", error);\n                            isConnectingRef.current = false;\n                            updateConnectionState(\"error\");\n                        }\n                    }[\"ChatProvider.useCallback[connect]\"],\n                    onWebSocketError: {\n                        \"ChatProvider.useCallback[connect]\": (error)=>{\n                            console.error(\"âŒ WebSocket error for user\", userId, \":\", error);\n                            isConnectingRef.current = false;\n                            updateConnectionState(\"error\");\n                        }\n                    }[\"ChatProvider.useCallback[connect]\"],\n                    onWebSocketClose: {\n                        \"ChatProvider.useCallback[connect]\": ()=>{\n                            console.log(\"âŒ Global WebSocket connection closed for user:\", userId);\n                            isConnectingRef.current = false;\n                            updateConnectionState(\"disconnected\");\n                        }\n                    }[\"ChatProvider.useCallback[connect]\"]\n                });\n                client.activate();\n            } catch (error) {\n                console.error(\"âŒ Error creating global WebSocket connection for user\", userId, \":\", error);\n                isConnectingRef.current = false;\n                updateConnectionState(\"error\");\n            }\n        }\n    }[\"ChatProvider.useCallback[connect]\"], [\n        userId,\n        updateConnectionState,\n        notifyMessageListeners\n    ]);\n    const sendMessage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChatProvider.useCallback[sendMessage]\": (msg)=>{\n            if (connectionState !== \"connected\" || !globalClient) {\n                console.error(\"âŒ Cannot send message: not connected. State:\", connectionState);\n                return false;\n            }\n            try {\n                console.log(\"ðŸ“¤ Sending private message via global WebSocket:\", msg);\n                globalClient.publish({\n                    destination: \"/app/chat.private\",\n                    body: JSON.stringify(msg)\n                });\n                console.log(\"âœ… Private message sent successfully via global WebSocket\");\n                return true;\n            } catch (error) {\n                console.error(\"âŒ Error sending private message via global WebSocket:\", error);\n                return false;\n            }\n        }\n    }[\"ChatProvider.useCallback[sendMessage]\"], [\n        connectionState\n    ]);\n    const reconnect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"ChatProvider.useCallback[reconnect]\": ()=>{\n            console.log(\"ðŸ”„ Manual reconnect requested for user:\", userId);\n            connectionAttemptsRef.current = 0;\n            isConnectingRef.current = false;\n            // Clean up existing connection\n            if (globalClient) {\n                try {\n                    globalClient.deactivate();\n                } catch (error) {\n                    console.warn(\"Error deactivating global client during manual reconnect:\", error);\n                }\n                globalClient = null;\n            }\n            if (reconnectTimeoutRef.current) {\n                clearTimeout(reconnectTimeoutRef.current);\n                reconnectTimeoutRef.current = null;\n            }\n            connect();\n        }\n    }[\"ChatProvider.useCallback[reconnect]\"], [\n        userId,\n        connect\n    ]);\n    // Initialize connection when userId changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"ChatProvider.useEffect\": ()=>{\n            if (userId) {\n                connect();\n            } else {\n                updateConnectionState(\"disconnected\");\n            }\n            return ({\n                \"ChatProvider.useEffect\": ()=>{\n                    if (reconnectTimeoutRef.current) {\n                        clearTimeout(reconnectTimeoutRef.current);\n                    }\n                }\n            })[\"ChatProvider.useEffect\"];\n        }\n    }[\"ChatProvider.useEffect\"], [\n        userId,\n        connect,\n        updateConnectionState\n    ]);\n    const isConnected = connectionState === \"connected\";\n    const isConnecting = connectionState === \"connecting\";\n    const hasError = connectionState === \"error\";\n    const contextValue = {\n        messages,\n        sendMessage,\n        isConnected,\n        isConnecting,\n        hasError,\n        connectionStatus: connectionState,\n        reconnect,\n        addMessageListener\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ChatContext.Provider, {\n        value: contextValue,\n        children: children\n    }, void 0, false, {\n        fileName: \"/Users/nihal/Desktop/Nihal/Projects/listri/apps/frontend/src/contexts/ChatContext.tsx\",\n        lineNumber: 288,\n        columnNumber: 5\n    }, this);\n}\n_s(ChatProvider, \"4oKLfQnyD9prkbVAW9bL6EmZx5Q=\");\n_c = ChatProvider;\nfunction useChat() {\n    _s1();\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ChatContext);\n    if (!context) {\n        throw new Error(\"useChat must be used within a ChatProvider\");\n    }\n    return context;\n}\n_s1(useChat, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"ChatProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb250ZXh0cy9DaGF0Q29udGV4dC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUVtRztBQUNoRTtBQUNLO0FBMEJ4QyxNQUFNUyw0QkFBY1Isb0RBQWFBLENBQXlCO0FBRTFELDRCQUE0QjtBQUM1QixJQUFJUyxlQUE4QjtBQUNsQyxJQUFJQyx3QkFBeUM7QUFDN0MsSUFBSUMsbUJBQW9ELElBQUlDO0FBQzVELElBQUlDLG9CQUFvQixJQUFJRDtBQUVyQixTQUFTRSxhQUFhLEtBQW1FO1FBQW5FLEVBQUVDLFFBQVEsRUFBRUMsTUFBTSxFQUFpRCxHQUFuRTs7SUFDM0IsTUFBTSxDQUFDQyxVQUFVQyxZQUFZLEdBQUdmLCtDQUFRQSxDQUFnQixFQUFFO0lBQzFELE1BQU0sQ0FBQ2dCLGlCQUFpQkMsbUJBQW1CLEdBQUdqQiwrQ0FBUUEsQ0FBa0I7SUFDeEUsTUFBTWtCLHNCQUFzQmpCLDZDQUFNQSxDQUF3QjtJQUMxRCxNQUFNa0Isd0JBQXdCbEIsNkNBQU1BLENBQUM7SUFDckMsTUFBTW1CLHVCQUF1QjtJQUM3QixNQUFNQyxpQkFBaUI7SUFDdkIsTUFBTUMsa0JBQWtCckIsNkNBQU1BLENBQUM7SUFFL0IsTUFBTXNCLHdCQUF3QnJCLGtEQUFXQTsyREFBQyxDQUFDc0I7WUFDekNqQix3QkFBd0JpQjtZQUN4QlAsbUJBQW1CTztRQUNyQjswREFBRyxFQUFFO0lBRUwsTUFBTUMscUJBQXFCdkIsa0RBQVdBO3dEQUFDLENBQUN3QjtZQUN0Q2xCLGlCQUFpQm1CLEdBQUcsQ0FBQ0Q7WUFDckI7Z0VBQU87b0JBQ0xsQixpQkFBaUJvQixNQUFNLENBQUNGO2dCQUMxQjs7UUFDRjt1REFBRyxFQUFFO0lBRUwsTUFBTUcseUJBQXlCM0Isa0RBQVdBOzREQUFDLENBQUM0QjtZQUMxQ3RCLGlCQUFpQnVCLE9BQU87b0VBQUNMLENBQUFBO29CQUN2QixJQUFJO3dCQUNGQSxTQUFTSTtvQkFDWCxFQUFFLE9BQU9FLE9B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QUlZLG9CQUFvQmlCLE9BQU8sRUFBRTtnQkFDL0JLLGFBQWF0QixvQkFBb0JpQixPQUFPO2dCQUN4Q2pCLG9CQUFvQmlCLE9BQU8sR0FBRztZQUNoQztZQUVBRDtRQUNGOzhDQUFHO1FBQUNyQjtRQUFRcUI7S0FBUTtJQUVwQiw0Q0FBNEM7SUFDNUNuQyxnREFBU0E7a0NBQUM7WUFDUixJQUFJYyxRQUFRO2dCQUNWcUI7WUFDRixPQUFPO2dCQUNMWCxzQkFBc0I7WUFDeEI7WUFFQTswQ0FBTztvQkFDTCxJQUFJTCxvQkFBb0JpQixPQUFPLEVBQUU7d0JBQy9CSyxhQUFhdEIsb0JBQW9CaUIsT0FBTztvQkFDMUM7Z0JBQ0Y7O1FBQ0Y7aUNBQUc7UUFBQ3RCO1FBQVFxQjtRQUFTWDtLQUFzQjtJQUUzQyxNQUFNMkQsY0FBY2xFLG9CQUFvQjtJQUN4QyxNQUFNbUUsZUFBZW5FLG9CQUFvQjtJQUN6QyxNQUFNb0UsV0FBV3BFLG9CQUFvQjtJQUVyQyxNQUFNcUUsZUFBZ0M7UUFDcEN2RTtRQUNBa0U7UUFDQUU7UUFDQUM7UUFDQUM7UUFDQUUsa0JBQWtCdEU7UUFDbEJpRTtRQUNBeEQ7SUFDRjtJQUVBLHFCQUNFLDhEQUFDcEIsWUFBWWtGLFFBQVE7UUFBQ0MsT0FBT0g7a0JBQzFCekU7Ozs7OztBQUdQO0dBN1BnQkQ7S0FBQUE7QUErUFQsU0FBUzhFOztJQUNkLE1BQU1DLFVBQVU1RixpREFBVUEsQ0FBQ087SUFDM0IsSUFBSSxDQUFDcUYsU0FBUztRQUNaLE1BQU0sSUFBSUMsTUFBTTtJQUNsQjtJQUNBLE9BQU9EO0FBQ1Q7SUFOZ0JEIiwic291cmNlcyI6WyIvVXNlcnMvbmloYWwvRGVza3RvcC9OaWhhbC9Qcm9qZWN0cy9saXN0cmkvYXBwcy9mcm9udGVuZC9zcmMvY29udGV4dHMvQ2hhdENvbnRleHQudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VDYWxsYmFjayB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFNvY2tKUyBmcm9tIFwic29ja2pzLWNsaWVudFwiO1xuaW1wb3J0IHsgQ2xpZW50IH0gZnJvbSBcIkBzdG9tcC9zdG9tcGpzXCI7XG5cbmV4cG9ydCB0eXBlIENoYXRNZXNzYWdlID0ge1xuICBpZD86IHN0cmluZztcbiAgY29udmVyc2F0aW9uSWQ/OiBzdHJpbmc7XG4gIHNlbmRlcklkOiBzdHJpbmc7XG4gIHNlbmRlck5hbWU6IHN0cmluZztcbiAgcmVjZWl2ZXJJZDogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIHRpbWVzdGFtcD86IHN0cmluZztcbiAgbGlzdGluZ0lkOiBzdHJpbmc7XG59O1xuXG50eXBlIENvbm5lY3Rpb25TdGF0ZSA9IFwiZGlzY29ubmVjdGVkXCIgfCBcImNvbm5lY3RpbmdcIiB8IFwiY29ubmVjdGVkXCIgfCBcImVycm9yXCI7XG5cbmludGVyZmFjZSBDaGF0Q29udGV4dFR5cGUge1xuICBtZXNzYWdlczogQ2hhdE1lc3NhZ2VbXTtcbiAgc2VuZE1lc3NhZ2U6IChtc2c6IENoYXRNZXNzYWdlKSA9PiBib29sZWFuO1xuICBpc0Nvbm5lY3RlZDogYm9vbGVhbjtcbiAgaXNDb25uZWN0aW5nOiBib29sZWFuO1xuICBoYXNFcnJvcjogYm9vbGVhbjtcbiAgY29ubmVjdGlvblN0YXR1czogQ29ubmVjdGlvblN0YXRlO1xuICByZWNvbm5lY3Q6ICgpID0+IHZvaWQ7XG4gIGFkZE1lc3NhZ2VMaXN0ZW5lcjogKGxpc3RlbmVyOiAobXNnOiBDaGF0TWVzc2FnZSkgPT4gdm9pZCkgPT4gKCkgPT4gdm9pZDtcbn1cblxuY29uc3QgQ2hhdENvbnRleHQgPSBjcmVhdGVDb250ZXh0PENoYXRDb250ZXh0VHlwZSB8IG51bGw+KG51bGwpO1xuXG4vLyBHbG9iYWwgY29ubmVjdGlvbiBtYW5hZ2VyXG5sZXQgZ2xvYmFsQ2xpZW50OiBDbGllbnQgfCBudWxsID0gbnVsbDtcbmxldCBnbG9iYWxDb25uZWN0aW9uU3RhdGU6IENvbm5lY3Rpb25TdGF0ZSA9IFwiZGlzY29ubmVjdGVkXCI7XG5sZXQgbWVzc2FnZUxpc3RlbmVyczogU2V0PChtc2c6IENoYXRNZXNzYWdlKSA9PiB2b2lkPiA9IG5ldyBTZXQoKTtcbmxldCBwcm9jZXNzZWRNZXNzYWdlcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG5leHBvcnQgZnVuY3Rpb24gQ2hhdFByb3ZpZGVyKHsgY2hpbGRyZW4sIHVzZXJJZCB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGU7IHVzZXJJZDogc3RyaW5nIH0pIHtcbiAgY29uc3QgW21lc3NhZ2VzLCBzZXRNZXNzYWdlc10gPSB1c2VTdGF0ZTxDaGF0TWVzc2FnZVtdPihbXSk7XG4gIGNvbnN0IFtjb25uZWN0aW9uU3RhdGUsIHNldENvbm5lY3Rpb25TdGF0ZV0gPSB1c2VTdGF0ZTxDb25uZWN0aW9uU3RhdGU+KFwiZGlzY29ubmVjdGVkXCIpO1xuICBjb25zdCByZWNvbm5lY3RUaW1lb3V0UmVmID0gdXNlUmVmPE5vZGVKUy5UaW1lb3V0IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGNvbm5lY3Rpb25BdHRlbXB0c1JlZiA9IHVzZVJlZigwKTtcbiAgY29uc3QgbWF4UmVjb25uZWN0QXR0ZW1wdHMgPSAzO1xuICBjb25zdCByZWNvbm5lY3REZWxheSA9IDMwMDA7XG4gIGNvbnN0IGlzQ29ubmVjdGluZ1JlZiA9IHVzZVJlZihmYWxzZSk7XG5cbiAgY29uc3QgdXBkYXRlQ29ubmVjdGlvblN0YXRlID0gdXNlQ2FsbGJhY2soKG5ld1N0YXRlOiBDb25uZWN0aW9uU3RhdGUpID0+IHtcbiAgICBnbG9iYWxDb25uZWN0aW9uU3RhdGUgPSBuZXdTdGF0ZTtcbiAgICBzZXRDb25uZWN0aW9uU3RhdGUobmV3U3RhdGUpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgYWRkTWVzc2FnZUxpc3RlbmVyID0gdXNlQ2FsbGJhY2soKGxpc3RlbmVyOiAobXNnOiBDaGF0TWVzc2FnZSkgPT4gdm9pZCkgPT4ge1xuICAgIG1lc3NhZ2VMaXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbWVzc2FnZUxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICBjb25zdCBub3RpZnlNZXNzYWdlTGlzdGVuZXJzID0gdXNlQ2FsbGJhY2soKG1zZzogQ2hhdE1lc3NhZ2UpID0+IHtcbiAgICBtZXNzYWdlTGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbGlzdGVuZXIobXNnKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBtZXNzYWdlIGxpc3RlbmVyOlwiLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBjb25uZWN0ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmICghdXNlcklkIHx8IGlzQ29ubmVjdGluZ1JlZi5jdXJyZW50KSByZXR1cm47XG5cbiAgICAvLyBDaGVjayBpZiB0aGVyZSdzIGFscmVhZHkgYSBnbG9iYWwgY29ubmVjdGlvblxuICAgIGlmIChnbG9iYWxDbGllbnQgJiYgZ2xvYmFsQ2xpZW50LmNvbm5lY3RlZCkge1xuICAgICAgY29uc29sZS5sb2coXCLwn5SMIFVzaW5nIGV4aXN0aW5nIGdsb2JhbCBXZWJTb2NrZXQgY29ubmVjdGlvbiBmb3IgdXNlcjpcIiwgdXNlcklkKTtcbiAgICAgIHVwZGF0ZUNvbm5lY3Rpb25TdGF0ZShcImNvbm5lY3RlZFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDbGVhbiB1cCBhbnkgZXhpc3RpbmcgY29ubmVjdGlvblxuICAgIGlmIChnbG9iYWxDbGllbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGdsb2JhbENsaWVudC5kZWFjdGl2YXRlKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJFcnJvciBkZWFjdGl2YXRpbmcgZXhpc3RpbmcgZ2xvYmFsIGNsaWVudDpcIiwgZXJyb3IpO1xuICAgICAgfVxuICAgICAgZ2xvYmFsQ2xpZW50ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAocmVjb25uZWN0VGltZW91dFJlZi5jdXJyZW50KSB7XG4gICAgICBjbGVhclRpbWVvdXQocmVjb25uZWN0VGltZW91dFJlZi5jdXJyZW50KTtcbiAgICAgIHJlY29ubmVjdFRpbWVvdXRSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuXG4gICAgY29ubmVjdGlvbkF0dGVtcHRzUmVmLmN1cnJlbnQgPSAwO1xuICAgIGlzQ29ubmVjdGluZ1JlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICBcbiAgICBjb25zb2xlLmxvZyhcIvCflIwgSW5pdGlhbGl6aW5nIGdsb2JhbCBXZWJTb2NrZXQgY29ubmVjdGlvbiBmb3IgdXNlcjpcIiwgdXNlcklkKTtcbiAgICB1cGRhdGVDb25uZWN0aW9uU3RhdGUoXCJjb25uZWN0aW5nXCIpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNvY2tldCA9IG5ldyBTb2NrSlMoXCJodHRwOi8vbG9jYWxob3N0OjgwODEvd3NcIik7XG4gICAgICBcbiAgICAgIGNvbnN0IGNsaWVudCA9IG5ldyBDbGllbnQoe1xuICAgICAgICB3ZWJTb2NrZXRGYWN0b3J5OiAoKSA9PiBzb2NrZXQsXG4gICAgICAgIHJlY29ubmVjdERlbGF5OiAwLCAvLyBEaXNhYmxlIGF1dG9tYXRpYyByZWNvbm5lY3Rpb25cbiAgICAgICAgaGVhcnRiZWF0SW5jb21pbmc6IDQwMDAsXG4gICAgICAgIGhlYXJ0YmVhdE91dGdvaW5nOiA0MDAwLFxuICAgICAgICBvbkNvbm5lY3Q6ICgpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIuKchSBHbG9iYWwgV2ViU29ja2V0IGNvbm5lY3RlZCBzdWNjZXNzZnVsbHkgZm9yIHVzZXI6XCIsIHVzZXJJZCk7XG4gICAgICAgICAgY29ubmVjdGlvbkF0dGVtcHRzUmVmLmN1cnJlbnQgPSAwO1xuICAgICAgICAgIGlzQ29ubmVjdGluZ1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgdXBkYXRlQ29ubmVjdGlvblN0YXRlKFwiY29ubmVjdGVkXCIpO1xuICAgICAgICAgIFxuICAgICAgICAgIGdsb2JhbENsaWVudCA9IGNsaWVudDtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTdWJzY3JpYmUgdG8gdXNlci1zcGVjaWZpYyBwcml2YXRlIG1lc3NhZ2VzXG4gICAgICAgICAgY2xpZW50LnN1YnNjcmliZShgL3VzZXIvJHt1c2VySWR9L3F1ZXVlL21lc3NhZ2VzYCwgKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi8J+TqCBSZWNlaXZlZCBwcml2YXRlIG1lc3NhZ2UgZm9yIHVzZXJcIiwgdXNlcklkLCBcIjpcIiwgbWVzc2FnZS5ib2R5KTtcbiAgICAgICAgICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2UobWVzc2FnZS5ib2R5KTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLwn5OoIFBhcnNlZCBwcml2YXRlIG1lc3NhZ2U6XCIsIGJvZHkpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gT25seSBwcm9jZXNzIGlmIGl0J3MgYSBjaGF0IG1lc3NhZ2UgKG5vdCBqb2luIG1lc3NhZ2UpXG4gICAgICAgICAgICAgIGlmIChib2R5LmNvbnRlbnQgJiYgYm9keS5jb250ZW50ICE9PSBcImpvaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgdW5pcXVlIGtleSBmb3IgbWVzc2FnZSBkZWR1cGxpY2F0aW9uXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUtleSA9IGAke2JvZHkuaWQgfHwgYm9keS50aW1lc3RhbXAgfHwgRGF0ZS5ub3coKX1fJHtib2R5LnNlbmRlcklkfV8ke2JvZHkuY29udGVudH1gO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChwcm9jZXNzZWRNZXNzYWdlcy5oYXMobWVzc2FnZUtleSkpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi8J+TqCBTa2lwcGluZyBkdXBsaWNhdGUgbWVzc2FnZTpcIiwgbWVzc2FnZUtleSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZE1lc3NhZ2VzLmFkZChtZXNzYWdlS2V5KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDbGVhbiB1cCBvbGQgbWVzc2FnZXMgZnJvbSB0aGUgc2V0IChrZWVwIG9ubHkgbGFzdCAxMDApXG4gICAgICAgICAgICAgICAgaWYgKHByb2Nlc3NlZE1lc3NhZ2VzLnNpemUgPiAxMDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VzQXJyYXkgPSBBcnJheS5mcm9tKHByb2Nlc3NlZE1lc3NhZ2VzKTtcbiAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZE1lc3NhZ2VzLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICBtZXNzYWdlc0FycmF5LnNsaWNlKC01MCkuZm9yRWFjaChtc2cgPT4gcHJvY2Vzc2VkTWVzc2FnZXMuYWRkKG1zZykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIvCfk6ggUHJvY2Vzc2luZyBwcml2YXRlIG1lc3NhZ2VcIik7XG4gICAgICAgICAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgYm9keV0pO1xuICAgICAgICAgICAgICAgIG5vdGlmeU1lc3NhZ2VMaXN0ZW5lcnMoYm9keSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLwn5OoIElnbm9yaW5nIGpvaW4gbWVzc2FnZVwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBwYXJzaW5nIHByaXZhdGUgbWVzc2FnZTpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gU2VuZCBqb2luIG1lc3NhZ2Ugb25seSBvbmNlIHBlciBjb25uZWN0aW9uXG4gICAgICAgICAgY29uc3Qgam9pbk1lc3NhZ2UgPSB7XG4gICAgICAgICAgICBzZW5kZXJJZDogdXNlcklkLFxuICAgICAgICAgICAgc2VuZGVyTmFtZTogdXNlcklkLFxuICAgICAgICAgICAgY29udGVudDogXCJqb2luZWRcIixcbiAgICAgICAgICAgIHJlY2VpdmVySWQ6IFwiXCIsXG4gICAgICAgICAgICBsaXN0aW5nSWQ6IFwiXCJcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwi8J+RiyBTZW5kaW5nIGpvaW4gbWVzc2FnZTpcIiwgam9pbk1lc3NhZ2UpO1xuICAgICAgICAgIGNsaWVudC5wdWJsaXNoKHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uOiBcIi9hcHAvY2hhdC5qb2luXCIsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShqb2luTWVzc2FnZSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRGlzY29ubmVjdDogKCkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwi4p2MIEdsb2JhbCBXZWJTb2NrZXQgZGlzY29ubmVjdGVkIGZvciB1c2VyOlwiLCB1c2VySWQpO1xuICAgICAgICAgIGlzQ29ubmVjdGluZ1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgdXBkYXRlQ29ubmVjdGlvblN0YXRlKFwiZGlzY29ubmVjdGVkXCIpO1xuICAgICAgICAgIFxuICAgICAgICAgIGdsb2JhbENsaWVudCA9IG51bGw7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQXR0ZW1wdCB0byByZWNvbm5lY3QgaWYgd2UgaGF2ZW4ndCBleGNlZWRlZCBtYXggYXR0ZW1wdHNcbiAgICAgICAgICBpZiAoY29ubmVjdGlvbkF0dGVtcHRzUmVmLmN1cnJlbnQgPCBtYXhSZWNvbm5lY3RBdHRlbXB0cykge1xuICAgICAgICAgICAgY29ubmVjdGlvbkF0dGVtcHRzUmVmLmN1cnJlbnQrKztcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIFJlY29ubmVjdGlvbiBhdHRlbXB0ICR7Y29ubmVjdGlvbkF0dGVtcHRzUmVmLmN1cnJlbnR9LyR7bWF4UmVjb25uZWN0QXR0ZW1wdHN9IGZvciB1c2VyOmAsIHVzZXJJZCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlY29ubmVjdFRpbWVvdXRSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBjb25uZWN0KCk7XG4gICAgICAgICAgICB9LCByZWNvbm5lY3REZWxheSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgTWF4IHJlY29ubmVjdGlvbiBhdHRlbXB0cyByZWFjaGVkIGZvciB1c2VyOlwiLCB1c2VySWQpO1xuICAgICAgICAgICAgdXBkYXRlQ29ubmVjdGlvblN0YXRlKFwiZXJyb3JcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvblN0b21wRXJyb3I6IChlcnJvcikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgU1RPTVAgZXJyb3IgZm9yIHVzZXJcIiwgdXNlcklkLCBcIjpcIiwgZXJyb3IpO1xuICAgICAgICAgIGlzQ29ubmVjdGluZ1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgdXBkYXRlQ29ubmVjdGlvblN0YXRlKFwiZXJyb3JcIik7XG4gICAgICAgIH0sXG4gICAgICAgIG9uV2ViU29ja2V0RXJyb3I6IChlcnJvcikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgV2ViU29ja2V0IGVycm9yIGZvciB1c2VyXCIsIHVzZXJJZCwgXCI6XCIsIGVycm9yKTtcbiAgICAgICAgICBpc0Nvbm5lY3RpbmdSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICAgIHVwZGF0ZUNvbm5lY3Rpb25TdGF0ZShcImVycm9yXCIpO1xuICAgICAgICB9LFxuICAgICAgICBvbldlYlNvY2tldENsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCLinYwgR2xvYmFsIFdlYlNvY2tldCBjb25uZWN0aW9uIGNsb3NlZCBmb3IgdXNlcjpcIiwgdXNlcklkKTtcbiAgICAgICAgICBpc0Nvbm5lY3RpbmdSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICAgIHVwZGF0ZUNvbm5lY3Rpb25TdGF0ZShcImRpc2Nvbm5lY3RlZFwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNsaWVudC5hY3RpdmF0ZSgpO1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgY3JlYXRpbmcgZ2xvYmFsIFdlYlNvY2tldCBjb25uZWN0aW9uIGZvciB1c2VyXCIsIHVzZXJJZCwgXCI6XCIsIGVycm9yKTtcbiAgICAgIGlzQ29ubmVjdGluZ1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICB1cGRhdGVDb25uZWN0aW9uU3RhdGUoXCJlcnJvclwiKTtcbiAgICB9XG4gIH0sIFt1c2VySWQsIHVwZGF0ZUNvbm5lY3Rpb25TdGF0ZSwgbm90aWZ5TWVzc2FnZUxpc3RlbmVyc10pO1xuXG4gIGNvbnN0IHNlbmRNZXNzYWdlID0gdXNlQ2FsbGJhY2soKG1zZzogQ2hhdE1lc3NhZ2UpOiBib29sZWFuID0+IHtcbiAgICBpZiAoY29ubmVjdGlvblN0YXRlICE9PSBcImNvbm5lY3RlZFwiIHx8ICFnbG9iYWxDbGllbnQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgQ2Fubm90IHNlbmQgbWVzc2FnZTogbm90IGNvbm5lY3RlZC4gU3RhdGU6XCIsIGNvbm5lY3Rpb25TdGF0ZSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKFwi8J+TpCBTZW5kaW5nIHByaXZhdGUgbWVzc2FnZSB2aWEgZ2xvYmFsIFdlYlNvY2tldDpcIiwgbXNnKTtcbiAgICAgIGdsb2JhbENsaWVudC5wdWJsaXNoKHtcbiAgICAgICAgZGVzdGluYXRpb246IFwiL2FwcC9jaGF0LnByaXZhdGVcIixcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkobXNnKSxcbiAgICAgIH0pO1xuICAgICAgY29uc29sZS5sb2coXCLinIUgUHJpdmF0ZSBtZXNzYWdlIHNlbnQgc3VjY2Vzc2Z1bGx5IHZpYSBnbG9iYWwgV2ViU29ja2V0XCIpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3Igc2VuZGluZyBwcml2YXRlIG1lc3NhZ2UgdmlhIGdsb2JhbCBXZWJTb2NrZXQ6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sIFtjb25uZWN0aW9uU3RhdGVdKTtcblxuICBjb25zdCByZWNvbm5lY3QgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCLwn5SEIE1hbnVhbCByZWNvbm5lY3QgcmVxdWVzdGVkIGZvciB1c2VyOlwiLCB1c2VySWQpO1xuICAgIGNvbm5lY3Rpb25BdHRlbXB0c1JlZi5jdXJyZW50ID0gMDtcbiAgICBpc0Nvbm5lY3RpbmdSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgIFxuICAgIC8vIENsZWFuIHVwIGV4aXN0aW5nIGNvbm5lY3Rpb25cbiAgICBpZiAoZ2xvYmFsQ2xpZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICBnbG9iYWxDbGllbnQuZGVhY3RpdmF0ZSgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiRXJyb3IgZGVhY3RpdmF0aW5nIGdsb2JhbCBjbGllbnQgZHVyaW5nIG1hbnVhbCByZWNvbm5lY3Q6XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICAgIGdsb2JhbENsaWVudCA9IG51bGw7XG4gICAgfVxuICAgIFxuICAgIGlmIChyZWNvbm5lY3RUaW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgIGNsZWFyVGltZW91dChyZWNvbm5lY3RUaW1lb3V0UmVmLmN1cnJlbnQpO1xuICAgICAgcmVjb25uZWN0VGltZW91dFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgY29ubmVjdCgpO1xuICB9LCBbdXNlcklkLCBjb25uZWN0XSk7XG5cbiAgLy8gSW5pdGlhbGl6ZSBjb25uZWN0aW9uIHdoZW4gdXNlcklkIGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodXNlcklkKSB7XG4gICAgICBjb25uZWN0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVwZGF0ZUNvbm5lY3Rpb25TdGF0ZShcImRpc2Nvbm5lY3RlZFwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHJlY29ubmVjdFRpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhclRpbWVvdXQocmVjb25uZWN0VGltZW91dFJlZi5jdXJyZW50KTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbdXNlcklkLCBjb25uZWN0LCB1cGRhdGVDb25uZWN0aW9uU3RhdGVdKTtcblxuICBjb25zdCBpc0Nvbm5lY3RlZCA9IGNvbm5lY3Rpb25TdGF0ZSA9PT0gXCJjb25uZWN0ZWRcIjtcbiAgY29uc3QgaXNDb25uZWN0aW5nID0gY29ubmVjdGlvblN0YXRlID09PSBcImNvbm5lY3RpbmdcIjtcbiAgY29uc3QgaGFzRXJyb3IgPSBjb25uZWN0aW9uU3RhdGUgPT09IFwiZXJyb3JcIjtcblxuICBjb25zdCBjb250ZXh0VmFsdWU6IENoYXRDb250ZXh0VHlwZSA9IHtcbiAgICBtZXNzYWdlcyxcbiAgICBzZW5kTWVzc2FnZSxcbiAgICBpc0Nvbm5lY3RlZCxcbiAgICBpc0Nvbm5lY3RpbmcsXG4gICAgaGFzRXJyb3IsXG4gICAgY29ubmVjdGlvblN0YXR1czogY29ubmVjdGlvblN0YXRlLFxuICAgIHJlY29ubmVjdCxcbiAgICBhZGRNZXNzYWdlTGlzdGVuZXIsXG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8Q2hhdENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2NvbnRleHRWYWx1ZX0+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9DaGF0Q29udGV4dC5Qcm92aWRlcj5cbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNoYXQoKSB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KENoYXRDb250ZXh0KTtcbiAgaWYgKCFjb250ZXh0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidXNlQ2hhdCBtdXN0IGJlIHVzZWQgd2l0aGluIGEgQ2hhdFByb3ZpZGVyXCIpO1xuICB9XG4gIHJldHVybiBjb250ZXh0O1xufSAiXSwibmFtZXMiOlsiUmVhY3QiLCJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZUVmZmVjdCIsInVzZVN0YXRlIiwidXNlUmVmIiwidXNlQ2FsbGJhY2siLCJTb2NrSlMiLCJDbGllbnQiLCJDaGF0Q29udGV4dCIsImdsb2JhbENsaWVudCIsImdsb2JhbENvbm5lY3Rpb25TdGF0ZSIsIm1lc3NhZ2VMaXN0ZW5lcnMiLCJTZXQiLCJwcm9jZXNzZWRNZXNzYWdlcyIsIkNoYXRQcm92aWRlciIsImNoaWxkcmVuIiwidXNlcklkIiwibWVzc2FnZXMiLCJzZXRNZXNzYWdlcyIsImNvbm5lY3Rpb25TdGF0ZSIsInNldENvbm5lY3Rpb25TdGF0ZSIsInJlY29ubmVjdFRpbWVvdXRSZWYiLCJjb25uZWN0aW9uQXR0ZW1wdHNSZWYiLCJtYXhSZWNvbm5lY3RBdHRlbXB0cyIsInJlY29ubmVjdERlbGF5IiwiaXNDb25uZWN0aW5nUmVmIiwidXBkYXRlQ29ubmVjdGlvblN0YXRlIiwibmV3U3RhdGUiLCJhZGRNZXNzYWdlTGlzdGVuZXIiLCJsaXN0ZW5lciIsImFkZCIsImRlbGV0ZSIsIm5vdGlmeU1lc3NhZ2VMaXN0ZW5lcnMiLCJtc2ciLCJmb3JFYWNoIiwiZXJyb3IiLCJjb25zb2xlIiwiY29ubmVjdCIsImN1cnJlbnQiLCJjb25uZWN0ZWQiLCJsb2ciLCJkZWFjdGl2YXRlIiwid2FybiIsImNsZWFyVGltZW91dCIsInNvY2tldCIsImNsaWVudCIsIndlYlNvY2tldEZhY3RvcnkiLCJoZWFydGJlYXRJbmNvbWluZyIsImhlYXJ0YmVhdE91dGdvaW5nIiwib25Db25uZWN0Iiwic3Vic2NyaWJlIiwibWVzc2FnZSIsImJvZHkiLCJKU09OIiwicGFyc2UiLCJjb250ZW50IiwibWVzc2FnZUtleSIsImlkIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsInNlbmRlcklkIiwiaGFzIiwic2l6ZSIsIm1lc3NhZ2VzQXJyYXkiLCJBcnJheSIsImZyb20iLCJjbGVhciIsInNsaWNlIiwicHJldiIsImpvaW5NZXNzYWdlIiwic2VuZGVyTmFtZSIsInJlY2VpdmVySWQiLCJsaXN0aW5nSWQiLCJwdWJsaXNoIiwiZGVzdGluYXRpb24iLCJzdHJpbmdpZnkiLCJvbkRpc2Nvbm5lY3QiLCJzZXRUaW1lb3V0Iiwib25TdG9tcEVycm9yIiwib25XZWJTb2NrZXRFcnJvciIsIm9uV2ViU29ja2V0Q2xvc2UiLCJhY3RpdmF0ZSIsInNlbmRNZXNzYWdlIiwicmVjb25uZWN0IiwiaXNDb25uZWN0ZWQiLCJpc0Nvbm5lY3RpbmciLCJoYXNFcnJvciIsImNvbnRleHRWYWx1ZSIsImNvbm5lY3Rpb25TdGF0dXMiLCJQcm92aWRlciIsInZhbHVlIiwidXNlQ2hhdCIsImNvbnRleHQiLCJFcnJvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/contexts/ChatContext.tsx\n"));

/***/ })

});